<div class="profile-container">
  <!-- Profile Header -->
  <div class="profile-header">
    <div class="profile-avatar">
      <div class="avatar-circle">
        {{ getUserInitials() }}
      </div>
    </div>
    <div class="profile-info">
      <h1 class="profile-name">{{ getUserFullName() }}</h1>
      <p class="profile-role">{{ getRoleDisplayName() }}</p>
      <p class="profile-email">{{ currentUser?.email }}</p>
    </div>
  </div>

  <!-- Success/Error Messages -->
  <div *ngIf="profileUpdateSuccess" class="alert alert-success">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
    </svg>
    Profile updated successfully!
  </div>

  <div *ngIf="errorMessage" class="alert alert-error">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
      <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2" />
      <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2" />
    </svg>
    {{ errorMessage }}
  </div>

  <div *ngIf="successMessage" class="alert alert-success">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
    </svg>
    {{ successMessage }}
  </div>

  <div class="profile-layout">
    <!-- Profile Sidebar -->
    <div class="profile-sidebar">
      <nav class="profile-nav">
        <button *ngFor="let section of profileSections" (click)="setActiveSection(section.id)" class="profile-nav-item"
          [class.active]="activeSection === section.id">
          <div class="nav-icon">
            <!-- User Icon -->
            <svg *ngIf="section.icon === 'user'" width="20" height="20" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" />
              <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" />
            </svg>
            <!-- Briefcase Icon -->
            <svg *ngIf="section.icon === 'briefcase'" width="20" height="20" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <rect x="2" y="7" width="20" height="14" rx="2" ry="2" stroke="currentColor" stroke-width="2" />
              <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" stroke="currentColor" stroke-width="2" />
            </svg>
            <!-- Book Icon -->
            <svg *ngIf="section.icon === 'book'" width="20" height="20" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" stroke="currentColor" stroke-width="2" />
              <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" stroke="currentColor"
                stroke-width="2" />
            </svg>
            <!-- Work Icon -->
            <svg *ngIf="section.icon === 'work'" width="20" height="20" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <rect x="2" y="7" width="20" height="14" rx="2" ry="2" stroke="currentColor" stroke-width="2" />
              <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" stroke="currentColor" stroke-width="2" />
            </svg>
            <!-- File Icon -->
            <svg *ngIf="section.icon === 'file'" width="20" height="20" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor"
                stroke-width="2" />
              <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" />
            </svg>
            <!-- Settings Icon -->
            <svg *ngIf="section.icon === 'settings'" width="20" height="20" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" />
              <path
                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
                stroke="currentColor" stroke-width="2" />
            </svg>
          </div>
          <div class="nav-content">
            <span class="nav-title">{{ section.title }}</span>
            <span class="nav-description">{{ section.description }}</span>
          </div>
        </button>
      </nav>
    </div>

    <!-- Profile Content -->
    <div class="profile-content">
      <!-- Personal Information Section -->
      <div *ngIf="activeSection === 'personal'" class="profile-section">
        <div class="section-header">
          <h2 class="section-title">Personal Information</h2>
          <button *ngIf="!isEditingProfile" (click)="toggleEditProfile()" class="btn-secondary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor"
                stroke-width="2" />
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor"
                stroke-width="2" />
            </svg>
            Edit Profile
          </button>
        </div>

        <!-- Personal Information Form -->
        <form *ngIf="isEditingProfile" [formGroup]="profileForm" (ngSubmit)="onProfileSubmit()"
          class="profile-edit-form">
          <!-- Basic Information Card -->
          <div class="form-card">
            <div class="form-card-header">
              <div class="form-card-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" />
                  <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" />
                </svg>
              </div>
              <div class="form-card-title">
                <h3>Basic Information</h3>
                <p>Your personal details and contact information</p>
              </div>
            </div>
            <div class="form-card-content">
              <div class="form-row">
                <div class="form-group">
                  <label for="firstName" class="form-label">First Name *</label>
                  <input type="text" id="firstName" formControlName="firstName" class="form-input"
                    [class.error]="getFieldError('firstName')">
                  <div *ngIf="getFieldError('firstName')" class="field-error">
                    {{ getFieldError('firstName') }}
                  </div>
                </div>
                <div class="form-group">
                  <label for="lastName" class="form-label">Last Name *</label>
                  <input type="text" id="lastName" formControlName="lastName" class="form-input"
                    [class.error]="getFieldError('lastName')">
                  <div *ngIf="getFieldError('lastName')" class="field-error">
                    {{ getFieldError('lastName') }}
                  </div>
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label for="email" class="form-label">Email Address *</label>
                  <input type="email" id="email" formControlName="email" class="form-input"
                    [class.error]="getFieldError('email')">
                  <div *ngIf="getFieldError('email')" class="field-error">
                    {{ getFieldError('email') }}
                  </div>
                </div>
                <div class="form-group">
                  <label for="phone" class="form-label">Phone Number</label>
                  <input type="tel" id="phone" formControlName="phone" class="form-input"
                    placeholder="+1 (555) 123-4567">
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label for="linkedinUrl" class="form-label">LinkedIn Profile</label>
                  <input type="url" id="linkedinUrl" formControlName="linkedinUrl" class="form-input"
                    placeholder="https://linkedin.com/in/yourprofile">
                </div>
                <div class="form-group">
                  <label for="portfolioUrl" class="form-label">Portfolio Website</label>
                  <input type="url" id="portfolioUrl" formControlName="portfolioUrl" class="form-input"
                    placeholder="https://yourportfolio.com">
                </div>
              </div>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="form-actions-card">
            <button type="button" (click)="toggleEditProfile()" class="btn-secondary">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2" />
                <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2" />
              </svg>
              Cancel
            </button>
            <button type="submit" class="btn-primary" [disabled]="isLoading">
              <span *ngIf="isLoading" class="loading-spinner"></span>
              <svg *ngIf="!isLoading" width="16" height="16" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2" />
                <polyline points="22,4 12,14.01 9,11.01" stroke="currentColor" stroke-width="2" />
              </svg>
              {{ isLoading ? 'Saving...' : 'Save Changes' }}
            </button>
          </div>
        </form>

        <!-- Personal Information Display -->
        <div *ngIf="!isEditingProfile" class="personal-info-list">
          <div class="personal-info-item">
            <div class="personal-info-header">
              <div class="personal-info-details">
                <h3 class="personal-info-title">Basic Information</h3>
                <p class="personal-info-description">Personal details and contact information</p>
                <p class="personal-info-meta">Member since {{ formatDate(currentUser?.createdAt) }}</p>
              </div>
            </div>
            <div class="personal-info-content">
              <div class="personal-info-grid">
                <div class="personal-info-value">
                  <span class="personal-info-label">Full Name</span>
                  <span class="personal-info-text">
                    {{ (userProfile?.personalInfo?.firstName || currentUser?.firstName) }}
                    {{ (userProfile?.personalInfo?.lastName || currentUser?.lastName) }}
                  </span>
                </div>
                <div class="personal-info-value">
                  <span class="personal-info-label">Email Address</span>
                  <span class="personal-info-text">{{ (userProfile?.personalInfo?.email || currentUser?.email) }}</span>
                </div>
                <div class="personal-info-value" *ngIf="userProfile?.personalInfo?.phone">
                  <span class="personal-info-label">Phone Number</span>
                  <span class="personal-info-text">{{ userProfile?.personalInfo?.phone }}</span>
                </div>
                <div class="personal-info-value" *ngIf="userProfile?.personalInfo?.linkedinUrl">
                  <span class="personal-info-label">LinkedIn Profile</span>
                  <a [href]="userProfile?.personalInfo?.linkedinUrl" target="_blank" class="personal-info-link">
                    View LinkedIn Profile
                  </a>
                </div>
                <div class="personal-info-value" *ngIf="userProfile?.personalInfo?.portfolioUrl">
                  <span class="personal-info-label">Portfolio Website</span>
                  <a [href]="userProfile?.personalInfo?.portfolioUrl" target="_blank" class="personal-info-link">
                    View Portfolio
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Professional Info Section -->
      <div *ngIf="activeSection === 'professional'" class="profile-section">
        <div class="section-header">
          <h2 class="section-title">Professional Information</h2>
          <button *ngIf="!isEditingProfessional" (click)="toggleEditProfessional()" class="btn-secondary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor"
                stroke-width="2" />
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor"
                stroke-width="2" />
            </svg>
            Edit Professional Info
          </button>
        </div>

        <!-- Professional Info content will be added in the next part -->
      </div>

      <!-- Education Section -->
      <div *ngIf="activeSection === 'education'" class="profile-section">
        <div class="section-header">
          <h2 class="section-title">Education</h2>
          <button *ngIf="!isEditingEducation" (click)="toggleEditEducation()" class="btn-primary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2" />
              <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2" />
            </svg>
            Add Education
          </button>
        </div>

        <!-- Education content will be added in the next part -->
      </div>

      <!-- Experience Section -->
      <div *ngIf="activeSection === 'experience'" class="profile-section">
        <div class="section-header">
          <h2 class="section-title">Work Experience</h2>
          <button *ngIf="!isEditingExperience" (click)="toggleEditExperience()" class="btn-primary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2" />
              <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2" />
            </svg>
            Add Experience
          </button>
        </div>

        <!-- Experience content will be added in the next part -->
      </div>

      <!-- Resume Section -->
      <div *ngIf="activeSection === 'resume'" class="profile-section">
        <div class="section-header">
          <h2 class="section-title">Resume</h2>
        </div>

        <!-- Resume content will be added in the next part -->
      </div>

      <!-- Preferences Section -->
      <div *ngIf="activeSection === 'preferences'" class="profile-section">
        <div class="section-header">
          <h2 class="section-title">Preferences</h2>
        </div>

        <!-- Preferences content will be added in the next part -->
      </div>
    </div>
  </div>
</div>